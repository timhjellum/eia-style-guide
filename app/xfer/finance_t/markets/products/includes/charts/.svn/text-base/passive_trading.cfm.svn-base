<script type="text/javascript">
		var chart,
		opts_passive_trading = {
			chart: {
				renderTo: 'passive-trading',
				zoomType: 'x',
                marginTop: 70,
				marginBottom: 90				
			},
			credits: {
			  enabled: false
			},				
			title: {
				text: 'Index investors future-equivalent positions',
				align: 'left',
				x: 5,
				y: 20,
				style:  {
				  color: 'black',
				  fontWeight: 'bold',
				  fontSize: '16px',
				  fontFamily: 'Arial'
				}				
			},
			xAxis: {
				type: 'datetime',
				tickInterval: (365*24 * 3600 * 1000),
				startOnTick: false,
				min: Date.UTC(2007,8,1),
				lineColor: '#000000',
				labels: {
				  y: 20,
				  style: {
					color: 'black',
					fontFamily: 'Arial'
				  }
				}				
			},
			labels: {
				items: [{
					html: 'thousand contracts', // Y Axis label
					style:  {
						left: -25,
						top: -25,
						color: 'black',
						fontFamily: 'Arial'
					} 
				},{
					html: 'price per barrel (real 2009 dollars)', // Y Axis label
					style:  {
						left: 460,
						top: -25,
						color: 'rgb(189, 115, 42)',
						fontFamily: 'Arial'
					} 
				},
				{
				  html: 'Source: <a href="http://www.cftc.gov/MarketReports/index.htm">CFTC Special Call Report</a>, <a href="http://www.bloomberg.com/">Bloomberg</a>, Published by: <a href="http://www.eia.gov/">U.S. Energy Information Administration</a>.',
				  style:  {
					left:  '-20px',
					top:  '300px',
					color: 'gray',
					fontSize: '10px',
					fontFamily: 'Arial'
				  }
				},
				{
				  html: 'Updated: quarterly | Last Updated: April 14, 2011',
				  style:  {
					left:  '-20px',
					top:  '312px',
					color: 'gray',					
					fontSize: '10px',
					fontFamily: 'Arial'
				  }
				},				
		
				]
			},
		   legend: {
			  enabled: true,
			  layout: 'horizontal',
			  align: 'center',
			  verticalAlign: 'bottom',	  
			  x: 0,
			  y: -35,
			  borderWidth: 0,
			  symbolPadding: 5,					
			  itemStyle: {
				fontFamily: 'Arial',
				color: '#189bd7',
				textDecoration: 'none'
			  },
			  itemHoverStyle: {
				fontFamily: 'Arial',
				color: '#189bd7',
				textDecoration: 'underline'
			  }
			},			
			tooltip: {
				 style: { 
					padding: 5,
					fontFamily: 'Arial'
				  },				
				crosshairs: false,
				formatter: function() {
					var d = new Date(this.x),
							quarter = ( d.getMonth() / 3) + 1,
							//th = {1:'1st',2:'2nd',3:'3rd',4:'4th'}[quarter],
						value = {
               'long': this.y + ' thousand contracts',
							 'short': this.y + ' thousand contracts',
               'WTI 1st nearby': '$' + this.y.toFixed(2) + ' per barrel'
            }[this.series.name];
						
					return '<b>' + this.series.name + '</b><br/>' + d.getFullYear() + ', quarter ' + quarter +'<br/>'  + value + '<br>'; 
				}
			},
			yAxis: [{ // Primary yAxis
            title: null,
				//max:600,
				//min:-300,
				tickInterval: 100,
				labels: {
					style:{ 
						color: 'black',
						fontFamily: 'Arial'
					}
				}
      }, { // Secondary yAxis
        title: null,
        opposite: true,
				max:135,
				min:-100,
				tickInterval:40,
				labels: {
					style:{ 
						color: 'rgb(189, 115, 42)',
						fontFamily: 'Arial'
					},
					formatter: function(){
						if( this.value  < 0 ) return '';
						else return this.value;
					}					
				}
    	}],
			plotOptions: {
				column: {
					shadow:0,
					borderWidth:0
				},
				line: {
					shadow:0,
					lineWidth: 2,
					marker: {
						enabled: false,
						states: {
							hover: {
								enabled: true,
								radius: 4
							}
						}
					},
					states: {
						hover: {
							lineWidth: 2,
							marker: {
									radius: 1
							}
						}
					}
				}
			},
			exporting: {
				buttons:{
					printButton: {
						enabled: false
					}
				}
			},
			navigation: {
				buttonOptions: {
					y: 0
				}
			},				
			colors:[
				'#5D9732',
				'#0096d7',
				'#a33340',
				'#003953',
				'#bd732a',
				'#103203',
				'#ffc702'
			],
		/* standard color palette: 
		rgba(93, 151, 50, 1.0) //green
		rgba(0, 150, 215, 1.0)  //light blue
		rgba(0, 57, 83, 1.0)  //dark blue
		rgba(163, 51, 64, 1.0)  //red
		rgba(189, 115, 42, 1.0)  //tan
		rgba(64, 50, 3, 1.0)  //brown
		rgba(255, 199, 2, 1.0)  //yellow
		*/				
			series: []
		},
		series1 = {
			data: [],
			type: 'column',
			color: 'rgba(0, 150, 215, 1.0)',
			name: 'long',
			yAxis:0
		},
		series2 = {
			data: [],
			type: 'column',
			color: 'rgba(93, 151, 50, 1.0)',
			name: 'short',
			yAxis:0
		},
		series3 = {
			data: [],
			type: 'line',
			color: 'rgba(189, 115, 42, 1.0)',
			name: 'WTI 1st nearby',
			yAxis: 1
		};
			
	$(window).load(function() {
		$.get( 'data.cfm?chart=passive_trading', function(data) {
			var vals = data.DATA,
			twoMos = 60*24*2600*1000;

			$.each(vals, function(lineNo, items) {
				var date = Date.parse( parseInt(items[1])*3-2 +'/1/'+ items[0]),
					val1 = parseInt(items[2]),
					val2 = parseInt(items[3]),
					val3 = parseFloat(items[4]);

				if ( !isNaN( date ) ) {
					series1.data.push( [date, val1] );
					series2.data.push( [date, val2] );
					series3.data.push( [date, val3] );
				}
			});
			
			opts_passive_trading.xAxis.min = series1.data[0][0] - twoMos;
			opts_passive_trading.xAxis.max = series1.data[series1.data.length-1][0] + twoMos;
			
			opts_passive_trading.series.push(series1);
			opts_passive_trading.series.push(series2);
			opts_passive_trading.series.push(series3);

			chart = new Highcharts.Chart(opts_passive_trading);
			
			chart.renderer.image('../..//global/images/icons/icon_interactive.gif', 625, 23, 69, 17)
			.add();
			
		},'json');
		
	});
	</script>

<div id="passive-trading"></div>