<script type="text/javascript">
	  var chart,
			opts_expectations = {
			chart: {
				renderTo: 'expectations',
				zoomType: 'x',
                marginTop: 60,
				marginBottom: 85				
			},
			credits: {
			  enabled: false
			},			
			title: {
				text: 'Projected non-OPEC supply growth, annual average',
				align: 'left',
				x: 0,
				y: 15,
				style:  {
				  color: 'black',
				  fontWeight: 'bold',
				  fontSize: '16px',
				  fontFamily: 'Arial'
				}
			},
			xAxis: {
				type: 'datetime',
				tickInterval: 365*24 * 3600 * 1000,
				lineColor: '#000000',
				labels: {
				  y: 20,
				  style: {
					color: 'black',
					fontFamily: 'Arial'
				  }
				}				
			},
			labels: {
				items: [{
					html: 'Million barrels per day', // Y Axis label
					style:  {
						left:  '-30px',
						top:  '-25px',
					    color: 'black',
					    fontFamily: 'Arial'							
					}
				},
				{
				  html: 'Source: <a href="http://www.eia.gov/">U.S. Energy Information Administration</a>,  <a href="http://www.eia.doe.gov/emeu/steo/pub/contents.html">Short Term Energy Outlook</a>.',
				  style:  {
					left:  '-20px',
					top:  '305px',
					color: 'gray',
					fontSize: '10px',
					fontFamily: 'Arial'
				  }
				},
				{
				  html: 'Updated: Monthly | Last Updated: April 14, 2011',
				  style:  {
					left:  '-20px',
					top:  '317px',
					color: 'gray',					
					fontSize: '10px',
					fontFamily: 'Arial'
				  }
				}					
				]
			},
		   legend: {
			  enabled: true,
			  layout: 'horizontal',
			  align: 'center',
			  verticalAlign: 'bottom',	  
			  x: 0,
			  y: -30,
			  borderWidth: 0,
			  symbolPadding: 5,					
			  itemStyle: {
				fontFamily: 'Arial',
				color: '#189bd7',
				textDecoration: 'none'
			  },
			  itemHoverStyle: {
				fontFamily: 'Arial',
				color: '#189bd7',
				textDecoration: 'underline'
			  }
			},				
			tooltip: {
				 style: { 
					padding: 5,
					fontFamily: 'Arial'
				  },				
				formatter: function() {
					var date = new Date(this.x),
							month = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'][date.getMonth()];

					return '<b>' + month + ' ' + this.series.name + '</b><br>' + this.y.toFixed(1) + ' million barrels per day';
				}
			},
			yAxis: { 
				title: null,
				tickInterval: .5,
				startOnTick: false
			},
			plotOptions: {
				line: {
					shadow:0,
					borderWidth:0,
					marker: {
						enabled: false,
						states: {
							hover: {
								enabled: true,
								radius: 4
							}
						}
					},
					states: {
						hover: {
							lineWidth: 2,
							marker: {
									radius: 1
							}
						}
					}
				}
			},
			exporting: {
				buttons:{
					printButton: {
						enabled: false
					}
				}
			},
			navigation: {
				buttonOptions: {
					y: 0
				}
			},			
			colors:[
				'#5D9732',
				'#0096d7',
				'#003953',
				'#a33340',
				'#bd732a',
				'#103203',
				'#ffc702'
			],
			series: []
		};
			
	$(window).load(function() {
		$.get( 'data.cfm?chart=expectations', function(data) {
			var vals = data.DATA,
					year={},
					yearTmp=0,
					i = -1;
			
			$.each(vals, function(lineNo, items) {
				var date = new Date( items[0] +'/'+items[1]+'/1' ),
						val1 = parseFloat( items[2] );

				if(yearTmp != items[0] ){
					yearTmp = items[0];
					i++;
					
					year[i] = {
						data: [],
						type: 'line',
						name: items[0]
					};
				}
				
				if ( !isNaN( val1 ) ){
					year[i].data.push( [Date.parse(date), val1] );					
				}
				
			});

			for( i in year ){				
				opts_expectations.series.push(year[i]);
			}
			
			chart = new Highcharts.Chart( opts_expectations );
			
			chart.renderer.image('../..//global/images/icons/icon_interactive.gif', 625, 23, 69, 17)
			.add();
			
		},'json');

	});
	</script>

<div id="expectations"></div>